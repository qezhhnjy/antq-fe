(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[3255],{51014:function(oe,S,e){"use strict";var g=e(62350),P=e(75443),H=e(57663),ne=e(71577),x=e(71343),ve=e(34792),y=e(48086),ae=e(57361),T=e(33565),G=e(67294),D=e(85893),Y=function(F){var B=G.useState(!1),f=(0,T.Z)(B,2),A=f[0],d=f[1],b=G.useState(!1),M=(0,T.Z)(b,2),J=M[0],I=M[1],Q=function(){d(!0)},X=function(){var o=(0,ae.Z)((0,x.Z)().mark(function U(){var W,C;return(0,x.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return I(!0),i.prev=1,i.next=4,F.request();case 4:W=i.sent,W.code===1e3?y.ZP.success("\u5220\u9664\u6210\u529F"):y.ZP.error(W.msg);case 6:return i.prev=6,d(!1),I(!1),(C=F.table.current)===null||C===void 0||C.reload(),i.finish(6);case 11:case"end":return i.stop()}},U,null,[[1,,6,11]])}));return function(){return o.apply(this,arguments)}}(),w=function(){d(!1)};return(0,D.jsx)(P.Z,{title:F.title,visible:A,onConfirm:X,okButtonProps:{loading:J},onCancel:w,children:(0,D.jsx)(ne.Z,{type:"primary",danger:!0,onClick:Q,children:F.children})})};S.Z=Y},8177:function(oe,S,e){"use strict";e.r(S),e.d(S,{default:function(){return Ee},difficultyRate:function(){return q},recommendRate:function(){return _}});var g=e(71343),P=e(57361),H=e(33565),ne=e(57663),x=e(71577),ve=e(96433),y=e(43927),ae=e(71153),T=e(60331),G=e(94233),D=e(51890),Y=e(61701),re=e(63511),F=e(48846),B=e(67294),f=e(18613),A=e(46870),d=e(41687),b=e(33065),M=e(54530),J=e(54977),I=e(73171),Q=e(76570),X=e(1977),w=e(96534),o=e(45779),U=e(6934),W=e(43185),C=e(94412),ce=e(49111),i=e(19650),ge=e(34792),fe=e(48086),ue=e(96132),le=e(37476),p=e(24739),v=e(5966),ie=e(82361),me=e(62298),he=e(7789),t=e(85893),j=JSON.parse(localStorage.getItem("token")||"{}"),xe=function(E){var m=(0,B.useState)(),L=(0,H.Z)(m,2),$=L[0],K=L[1],z=E.table,O=E.title,u=E.info,l=E.onFinish;return(0,t.jsxs)(le.Y,{title:O,trigger:(0,t.jsx)(x.Z,{type:"primary",children:O}),modalProps:{destroyOnClose:!0},submitter:{searchConfig:{submitText:O,resetText:"\u53D6\u6D88"}},onFinish:function(){var n=(0,P.Z)((0,g.Z)().mark(function a(r){var s,R,h,Z;return(0,g.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return R=r.difficulty,h=r.recommend,c.next=3,l((0,ue.Z)((0,ue.Z)({},r),{},{id:u==null?void 0:u.id,difficulty:R*2,recommend:h*2}));case 3:return Z=c.sent,Z.code===1e3&&fe.ZP.success("\u6DFB\u52A0\u6210\u529F"),c.next=7,(s=z.current)===null||s===void 0?void 0:s.reload();case 7:return c.abrupt("return",!0);case 8:case"end":return c.stop()}},a)}));return function(a){return n.apply(this,arguments)}}(),children:[(0,t.jsx)(D.C,{src:$}),(0,t.jsxs)(p.UW,{children:[(0,t.jsx)(v.Z,{width:"md",name:"title",label:"\u8DEF\u7EBF\u540D\u79F0",rules:[{required:!0,message:"\u8DEF\u7EBF\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A!"}],initialValue:u.title,placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7EBF\u540D\u79F0"}),(0,t.jsx)(v.Z,{width:"md",name:"summary",label:"\u8DEF\u7EBF\u63CF\u8FF0",initialValue:u.summary,rules:[{required:!0,message:"\u8DEF\u7EBF\u63CF\u8FF0\u4E0D\u80FD\u4E3A\u7A7A!"}],placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7EBF\u63CF\u8FF0"})]}),(0,t.jsxs)(p.UW,{children:[(0,t.jsx)(v.Z,{width:"sm",name:"avatar",label:"\u56FE\u6807",initialValue:u.avatar,fieldProps:{onChange:function(a){return K(a.target.value)},value:$},placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7EBF\u56FE\u6807"}),(0,t.jsx)(he.Z,{rotate:!0,children:(0,t.jsx)(C.Z,{action:"/antq/web/minio/upload",headers:{Authorization:(j==null?void 0:j.token_type)+" "+(j==null?void 0:j.access_token)},showUploadList:!1,onChange:function(a){var r;a.file.status==="done"&&K((r=a.file.response)===null||r===void 0?void 0:r.data)},children:(0,t.jsxs)(i.Z,{direction:"vertical",children:[(0,t.jsx)("div",{children:"upload"}),(0,t.jsx)(x.Z,{icon:(0,t.jsx)(me.Z,{}),type:"primary",children:"\u4E0A\u4F20"})]})})}),(0,t.jsx)(v.Z,{width:"md",name:"iframe",label:"\u5730\u56FE\u9875",initialValue:u.iframe,tooltip:"FatMap\u5206\u4EAB\u7684iframe\u6807\u7B7E",rules:[{required:!0,message:"\u5730\u56FE\u9875\u4E0D\u80FD\u4E3A\u7A7A!",whitespace:!0}],placeholder:"\u8BF7\u8F93\u5165\u5730\u56FE\u9875"})]}),(0,t.jsxs)(p.UW,{children:[(0,t.jsx)(v.Z,{width:"md",name:"distance",label:"\u8DDD\u79BB(\u7C73)",initialValue:u.distance,rules:[{pattern:RegExp("\\dn*"),message:"\u8DDD\u79BB\u53EA\u80FD\u4E3A\u6574\u6570",whitespace:!0}],placeholder:"\u8BF7\u8F93\u5165\u7EBF\u8DEF\u8DDD\u79BB",prefixCls:"m"}),(0,t.jsx)(v.Z,{width:"md",name:"elevation",label:"\u5E73\u5747\u6D77\u62D4(\u7C73)",initialValue:u.elevation,rules:[{pattern:RegExp("\\dn*"),message:"\u6D77\u62D4\u53EA\u80FD\u4E3A\u6574\u6570",whitespace:!0}],placeholder:"\u8BF7\u8F93\u5165\u5E73\u5747\u6D77\u62D4"})]}),(0,t.jsxs)(p.UW,{children:[(0,t.jsx)(v.Z,{width:"md",name:"elevationRise",label:"\u7D2F\u8BA1\u722C\u5347(\u7C73)",initialValue:u.elevationRise,rules:[{pattern:RegExp("\\dn*"),message:"\u7D2F\u8BA1\u722C\u5347\u53EA\u80FD\u4E3A\u6574\u6570",whitespace:!0}],placeholder:"\u8BF7\u8F93\u5165\u7D2F\u8BA1\u722C\u5347",prefixCls:"m"}),(0,t.jsx)(v.Z,{width:"md",name:"elevationFall",label:"\u7D2F\u8BA1\u4E0B\u964D(\u7C73)",initialValue:u.elevationFall,rules:[{pattern:RegExp("\\dn*"),message:"\u7D2F\u8BA1\u4E0B\u964D\u53EA\u80FD\u4E3A\u6574\u6570",whitespace:!0}],placeholder:"\u8BF7\u8F93\u5165\u7D2F\u8BA1\u4E0B\u964D"})]}),(0,t.jsxs)(p.UW,{children:[(0,t.jsx)(ie.Z,{width:330,name:"difficulty",fieldProps:{character:function(a){var r=a.index;return q[r+1]}},label:"\u96BE\u5EA6\u7CFB\u6570",initialValue:Number(u.difficulty)/2}),(0,t.jsx)(ie.Z,{width:330,name:"recommend",fieldProps:{character:function(a){var r=a.index;return _[r+1]}},label:"\u63A8\u8350\u6307\u6570",initialValue:Number(u.recommend)/2})]})]})},se=xe,Fe=e(51014),k=e(87336),q={1:(0,t.jsx)(f.Z,{}),2:(0,t.jsx)(f.Z,{}),3:(0,t.jsx)(A.Z,{}),4:(0,t.jsx)(d.Z,{}),5:(0,t.jsx)(d.Z,{})},_={1:(0,t.jsx)(d.Z,{}),2:(0,t.jsx)(d.Z,{}),3:(0,t.jsx)(A.Z,{}),4:(0,t.jsx)(f.Z,{}),5:(0,t.jsx)(f.Z,{})},je=function(E){(0,Y.Z)(E);var m=(0,B.useRef)(),L=[{dataIndex:"index",valueType:"indexBorder",width:40},{title:"\u56FE\u6807",dataIndex:"avatar",width:50,render:function(n){return(0,t.jsx)(D.C,{src:n})}},{title:"\u540D\u79F0",dataIndex:"title",width:100,render:function(n){return(0,t.jsx)(T.Z,{style:{fontSize:"14px"},color:w.dj,children:n})}},{title:"\u8DDD\u79BB(\u7C73)",dataIndex:"distance",sorter:!0,width:100,render:function(n){return(0,t.jsx)(k.Z,{valueStyle:{fontSize:15,color:"red"},value:Number(n)||"-"})}},{title:(0,t.jsx)(b.Z,{}),dataIndex:"elevationRise",width:60,render:function(n){return(0,t.jsx)(k.Z,{valueStyle:{color:"red"},value:Number(n)||"-"})}},{title:(0,t.jsx)(M.Z,{}),dataIndex:"elevationFall",width:60,render:function(n){return(0,t.jsx)(k.Z,{valueStyle:{color:"green"},value:Number(n)||"-"})}},{title:"\u63CF\u8FF0",dataIndex:"summary"},{title:"\u96BE\u5EA6\u7CFB\u6570",dataIndex:"difficulty",width:200,sorter:!0,render:function(n){return(0,t.jsx)(y.Z,{character:function(r){var s=r.index;return q[s+1]},allowHalf:!0,disabled:!0,value:Number(n)/2})}},{title:"\u63A8\u8350\u6307\u6570",dataIndex:"recommend",width:200,sorter:!0,render:function(n){return(0,t.jsx)(y.Z,{character:function(r){var s=r.index;return _[s+1]},allowHalf:!0,disabled:!0,value:Number(n)/2})}},{title:"\u64CD\u4F5C",key:"option",width:200,valueType:"option",render:function(n,a){return[(0,t.jsx)(le.Y,{width:"90%",style:{top:0},trigger:(0,t.jsx)(x.Z,{type:"primary",children:"FatMap"}),submitter:!1,modalProps:{closable:!1,bodyStyle:{height:800,padding:0}},children:(0,t.jsx)("div",{dangerouslySetInnerHTML:{__html:a.iframe||""}})},"detail"),(0,t.jsx)(se,{table:m,title:(0,t.jsx)(J.Z,{style:{fontSize:16}}),info:a,onFinish:o.A0},"update"),(0,t.jsx)(Fe.Z,{title:"\u786E\u5B9A\u5220\u9664\u8BE5\u8DEF\u7EBF?",table:m,request:function(){return(0,o.u8)(a.id||"")},children:(0,t.jsx)(I.Z,{style:{fontSize:16}})},"del")]}}],$={},K=(0,B.useState)(""),z=(0,H.Z)(K,2),O=z[0],u=z[1];return(0,t.jsx)(re.ZP,{children:(0,t.jsx)(F.ZP,{columns:L,pagination:{size:"default",pageSize:10},actionRef:m,request:function(){var l=(0,P.Z)((0,g.Z)().mark(function n(a,r){var s,R,h,Z,V;return(0,g.Z)().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(s=a.pageSize,R=a.current,h={pageSize:s,pageNum:R,search:O},r)for(Z in r)h.orderBy=Z,V=r[Z],h.order=V==="descend"?"desc":V==="ascend"?"asc":void 0;return N.abrupt("return",(0,o.qA)(h).then(function(de){var ee,te;return{data:(ee=de.data)===null||ee===void 0?void 0:ee.list,success:!0,total:(te=de.data)===null||te===void 0?void 0:te.total}}));case 4:case"end":return N.stop()}},n)}));return function(n,a){return l.apply(this,arguments)}}(),headerTitle:(0,t.jsx)(U.Z,{allowClear:!0,enterButton:(0,t.jsx)(Q.Z,{}),onSearch:function(n){var a;u(n),(a=m.current)===null||a===void 0||a.reload()}}),rowKey:function(n){return n.id||""},toolBarRender:function(){return[(0,t.jsx)(se,{table:m,title:(0,t.jsx)(X.Z,{style:{fontSize:16}}),info:$,onFinish:o.W1})]},search:!1})})},Ee=je}}]);
