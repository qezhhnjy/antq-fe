(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[3255],{51014:function(oe,R,e){"use strict";var y=e(62350),O=e(75443),b=e(57663),ae=e(71577),h=e(71343),ce=e(34792),g=e(48086),ne=e(57361),T=e(33565),G=e(67294),D=e(85893),Y=function(x){var B=G.useState(!1),v=(0,T.Z)(B,2),A=v[0],d=v[1],J=G.useState(!1),M=(0,T.Z)(J,2),Q=M[0],I=M[1],X=function(){d(!0)},F=function(){var U=(0,ne.Z)((0,h.Z)().mark(function W(){var L,C;return(0,h.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return I(!0),i.prev=1,i.next=4,x.request();case 4:L=i.sent,L.code===1e3?g.ZP.success("\u5220\u9664\u6210\u529F"):g.ZP.error(L.msg);case 6:return i.prev=6,d(!1),I(!1),(C=x.table.current)===null||C===void 0||C.reload(),i.finish(6);case 11:case"end":return i.stop()}},W,null,[[1,,6,11]])}));return function(){return U.apply(this,arguments)}}(),w=function(){d(!1)};return(0,D.jsx)(O.Z,{title:x.title,visible:A,onConfirm:F,okButtonProps:{loading:Q},onCancel:w,children:(0,D.jsx)(ae.Z,{type:"primary",danger:!0,onClick:X,children:x.children})})};R.Z=Y},8177:function(oe,R,e){"use strict";e.r(R),e.d(R,{default:function(){return je},difficultyRate:function(){return q},recommendRate:function(){return _}});var y=e(71343),O=e(57361),b=e(33565),ae=e(57663),h=e(71577),ce=e(96433),g=e(43927),ne=e(71153),T=e(60331),G=e(94233),D=e(51890),Y=e(61701),re=e(63511),x=e(48846),B=e(67294),v=e(18613),A=e(46870),d=e(41687),J=e(54977),M=e(73171),Q=e(76570),I=e(1977),X=e(96534),F=e(45779),w=e(6934),U=e(43185),W=e(94412),L=e(49111),C=e(19650),ve=e(34792),i=e(48086),ue=e(96132),le=e(37476),p=e(24739),o=e(5966),ie=e(82361),me=e(62298),fe=e(7789),t=e(85893),j=JSON.parse(localStorage.getItem("token")||"{}"),he=function(E){var m=(0,B.useState)(),$=(0,b.Z)(m,2),z=$[0],K=$[1],V=E.table,S=E.title,u=E.info,l=E.onFinish;return(0,t.jsxs)(le.Y,{title:S,trigger:(0,t.jsx)(h.Z,{type:"primary",children:S}),modalProps:{destroyOnClose:!0},submitter:{searchConfig:{submitText:S,resetText:"\u53D6\u6D88"}},onFinish:function(){var a=(0,O.Z)((0,y.Z)().mark(function n(r){var s,P,f,Z;return(0,y.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return P=r.difficulty,f=r.recommend,c.next=3,l((0,ue.Z)((0,ue.Z)({},r),{},{id:u==null?void 0:u.id,difficulty:P*2,recommend:f*2}));case 3:return Z=c.sent,Z.code===1e3&&i.ZP.success("\u6DFB\u52A0\u6210\u529F"),c.next=7,(s=V.current)===null||s===void 0?void 0:s.reload();case 7:return c.abrupt("return",!0);case 8:case"end":return c.stop()}},n)}));return function(n){return a.apply(this,arguments)}}(),children:[(0,t.jsx)(D.C,{src:z}),(0,t.jsxs)(p.UW,{children:[(0,t.jsx)(o.Z,{width:"md",name:"title",label:"\u8DEF\u7EBF\u540D\u79F0",rules:[{required:!0,message:"\u8DEF\u7EBF\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A!"}],initialValue:u.title,placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7EBF\u540D\u79F0"}),(0,t.jsx)(o.Z,{width:"md",name:"summary",label:"\u8DEF\u7EBF\u63CF\u8FF0",initialValue:u.summary,rules:[{required:!0,message:"\u8DEF\u7EBF\u63CF\u8FF0\u4E0D\u80FD\u4E3A\u7A7A!"}],placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7EBF\u63CF\u8FF0"})]}),(0,t.jsxs)(p.UW,{children:[(0,t.jsx)(o.Z,{width:"sm",name:"avatar",label:"\u56FE\u6807",initialValue:u.avatar,fieldProps:{onChange:function(n){return K(n.target.value)},value:z},placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7EBF\u56FE\u6807"}),(0,t.jsx)(fe.Z,{rotate:!0,children:(0,t.jsx)(W.Z,{action:"/antq/web/minio/upload",headers:{Authorization:(j==null?void 0:j.token_type)+" "+(j==null?void 0:j.access_token)},showUploadList:!1,onChange:function(n){var r;n.file.status==="done"&&K((r=n.file.response)===null||r===void 0?void 0:r.data)},children:(0,t.jsxs)(C.Z,{direction:"vertical",children:[(0,t.jsx)("div",{children:"upload"}),(0,t.jsx)(h.Z,{icon:(0,t.jsx)(me.Z,{}),type:"primary",children:"\u4E0A\u4F20"})]})})}),(0,t.jsx)(o.Z,{width:"md",name:"iframe",label:"\u5730\u56FE\u9875",initialValue:u.iframe,tooltip:"FatMap\u5206\u4EAB\u7684iframe\u6807\u7B7E",rules:[{required:!0,message:"\u5730\u56FE\u9875\u4E0D\u80FD\u4E3A\u7A7A!",whitespace:!0}],placeholder:"\u8BF7\u8F93\u5165\u5730\u56FE\u9875"})]}),(0,t.jsxs)(p.UW,{children:[(0,t.jsx)(o.Z,{width:"md",name:"distance",label:"\u8DDD\u79BB(\u7C73)",initialValue:u.distance,rules:[{pattern:RegExp("\\dn*"),message:"\u8DDD\u79BB\u53EA\u80FD\u4E3A\u6574\u6570",whitespace:!0}],placeholder:"\u8BF7\u8F93\u5165\u7EBF\u8DEF\u8DDD\u79BB",prefixCls:"m"}),(0,t.jsx)(o.Z,{width:"md",name:"elevation",label:"\u5E73\u5747\u6D77\u62D4(\u7C73)",initialValue:u.elevation,rules:[{pattern:RegExp("\\dn*"),message:"\u6D77\u62D4\u53EA\u80FD\u4E3A\u6574\u6570",whitespace:!0}],placeholder:"\u8BF7\u8F93\u5165\u5E73\u5747\u6D77\u62D4"})]}),(0,t.jsxs)(p.UW,{children:[(0,t.jsx)(o.Z,{width:"md",name:"elevationRise",label:"\u7D2F\u8BA1\u722C\u5347(\u7C73)",initialValue:u.elevationRise,rules:[{pattern:RegExp("\\dn*"),message:"\u7D2F\u8BA1\u722C\u5347\u53EA\u80FD\u4E3A\u6574\u6570",whitespace:!0}],placeholder:"\u8BF7\u8F93\u5165\u7D2F\u8BA1\u722C\u5347",prefixCls:"m"}),(0,t.jsx)(o.Z,{width:"md",name:"elevationFall",label:"\u7D2F\u8BA1\u4E0B\u964D(\u7C73)",initialValue:u.elevationFall,rules:[{pattern:RegExp("\\dn*"),message:"\u7D2F\u8BA1\u4E0B\u964D\u53EA\u80FD\u4E3A\u6574\u6570",whitespace:!0}],placeholder:"\u8BF7\u8F93\u5165\u7D2F\u8BA1\u4E0B\u964D"})]}),(0,t.jsxs)(p.UW,{children:[(0,t.jsx)(ie.Z,{width:330,name:"difficulty",fieldProps:{character:function(n){var r=n.index;return q[r+1]}},label:"\u96BE\u5EA6\u7CFB\u6570",initialValue:Number(u.difficulty)/2}),(0,t.jsx)(ie.Z,{width:330,name:"recommend",fieldProps:{character:function(n){var r=n.index;return _[r+1]}},label:"\u63A8\u8350\u6307\u6570",initialValue:Number(u.recommend)/2})]})]})},se=he,xe=e(51014),k=e(87336),q={1:(0,t.jsx)(v.Z,{}),2:(0,t.jsx)(v.Z,{}),3:(0,t.jsx)(A.Z,{}),4:(0,t.jsx)(d.Z,{}),5:(0,t.jsx)(d.Z,{})},_={1:(0,t.jsx)(d.Z,{}),2:(0,t.jsx)(d.Z,{}),3:(0,t.jsx)(A.Z,{}),4:(0,t.jsx)(v.Z,{}),5:(0,t.jsx)(v.Z,{})},Fe=function(E){(0,Y.Z)(E);var m=(0,B.useRef)(),$=[{dataIndex:"index",valueType:"indexBorder",width:40},{title:"\u56FE\u6807",dataIndex:"avatar",width:50,render:function(a){return(0,t.jsx)(D.C,{src:a})}},{title:"\u540D\u79F0",dataIndex:"title",width:100,render:function(a){return(0,t.jsx)(T.Z,{style:{fontSize:"14px"},color:X.dj,children:a})}},{title:"\u8DDD\u79BB(km)",dataIndex:"distance",sorter:!0,width:100,render:function(a){return(0,t.jsx)(k.Z,{valueStyle:{fontSize:18,color:"black"},value:Number(a)/1e3||"-"})}},{title:"\u722C\u5347(m)",dataIndex:"elevationRise",width:70,render:function(a){return(0,t.jsx)(k.Z,{valueStyle:{fontSize:14,color:"black"},value:Number(a)||"-"})}},{title:"\u4E0B\u964D(m)",dataIndex:"elevationFall",width:70,render:function(a){return(0,t.jsx)(k.Z,{valueStyle:{fontSize:14,color:"black"},value:Number(a)||"-"})}},{title:"\u63CF\u8FF0",dataIndex:"summary"},{title:"\u96BE\u5EA6\u7CFB\u6570",dataIndex:"difficulty",width:200,sorter:!0,render:function(a){return(0,t.jsx)(g.Z,{character:function(r){var s=r.index;return q[s+1]},allowHalf:!0,disabled:!0,value:Number(a)/2})}},{title:"\u63A8\u8350\u6307\u6570",dataIndex:"recommend",width:200,sorter:!0,render:function(a){return(0,t.jsx)(g.Z,{character:function(r){var s=r.index;return _[s+1]},allowHalf:!0,disabled:!0,value:Number(a)/2})}},{title:"\u64CD\u4F5C",key:"option",width:200,valueType:"option",render:function(a,n){return[(0,t.jsx)(le.Y,{width:"90%",style:{top:0},trigger:(0,t.jsx)(h.Z,{type:"primary",children:"FatMap"}),submitter:!1,modalProps:{closable:!1,bodyStyle:{height:800,padding:0}},children:(0,t.jsx)("div",{dangerouslySetInnerHTML:{__html:n.iframe||""}})},"detail"),(0,t.jsx)(se,{table:m,title:(0,t.jsx)(J.Z,{style:{fontSize:16}}),info:n,onFinish:F.A0},"update"),(0,t.jsx)(xe.Z,{title:"\u786E\u5B9A\u5220\u9664\u8BE5\u8DEF\u7EBF?",table:m,request:function(){return(0,F.u8)(n.id||"")},children:(0,t.jsx)(M.Z,{style:{fontSize:16}})},"del")]}}],z={},K=(0,B.useState)(""),V=(0,b.Z)(K,2),S=V[0],u=V[1];return(0,t.jsx)(re.ZP,{children:(0,t.jsx)(x.ZP,{columns:$,pagination:{size:"default",pageSize:10},actionRef:m,request:function(){var l=(0,O.Z)((0,y.Z)().mark(function a(n,r){var s,P,f,Z,N;return(0,y.Z)().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(s=n.pageSize,P=n.current,f={pageSize:s,pageNum:P,search:S},r)for(Z in r)f.orderBy=Z,N=r[Z],f.order=N==="descend"?"desc":N==="ascend"?"asc":void 0;return H.abrupt("return",(0,F.qA)(f).then(function(de){var ee,te;return{data:(ee=de.data)===null||ee===void 0?void 0:ee.list,success:!0,total:(te=de.data)===null||te===void 0?void 0:te.total}}));case 4:case"end":return H.stop()}},a)}));return function(a,n){return l.apply(this,arguments)}}(),headerTitle:(0,t.jsx)(w.Z,{allowClear:!0,enterButton:(0,t.jsx)(Q.Z,{}),onSearch:function(a){var n;u(a),(n=m.current)===null||n===void 0||n.reload()}}),rowKey:function(a){return a.id||""},toolBarRender:function(){return[(0,t.jsx)(se,{table:m,title:(0,t.jsx)(I.Z,{style:{fontSize:16}}),info:z,onFinish:F.W1})]},search:!1})})},je=Fe}}]);
