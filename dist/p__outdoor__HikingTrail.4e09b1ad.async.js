(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[3255],{51014:function(oe,R,e){"use strict";var G=e(62350),P=e(75443),ve=e(57663),y=e(71577),ce=e(34792),Z=e(48086),ae=e(3182),T=e(2824),ne=e(94043),D=e.n(ne),M=e(67294),A=e(85893),x=function(F){var B=M.useState(!1),f=(0,T.Z)(B,2),I=f[0],d=f[1],J=M.useState(!1),U=(0,T.Z)(J,2),Q=U[0],W=U[1],X=function(){d(!0)},Y=function(){var o=(0,ae.Z)(D().mark(function L(){var $,C;return D().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return W(!0),i.prev=1,i.next=4,F.request();case 4:$=i.sent,$.code===1e3?Z.default.success("\u5220\u9664\u6210\u529F"):Z.default.error($.msg);case 6:return i.prev=6,d(!1),W(!1),(C=F.table.current)===null||C===void 0||C.reload(),i.finish(6);case 11:case"end":return i.stop()}},L,null,[[1,,6,11]])}));return function(){return o.apply(this,arguments)}}(),w=function(){d(!1)};return(0,A.jsx)(P.Z,{title:F.title,visible:I,onConfirm:Y,okButtonProps:{loading:Q},onCancel:w,children:(0,A.jsx)(y.Z,{type:"primary",danger:!0,onClick:X,children:F.children})})};R.Z=x},8177:function(oe,R,e){"use strict";e.r(R),e.d(R,{default:function(){return ge},difficultyRate:function(){return q},recommendRate:function(){return _}});var G=e(3182),P=e(2824),ve=e(57663),y=e(71577),ce=e(96433),Z=e(43927),ae=e(71153),T=e(60331),ne=e(94233),D=e(51890),M=e(19273),A=e(94043),x=e.n(A),re=e(38315),F=e(94379),B=e(67294),f=e(18613),I=e(46870),d=e(41687),J=e(33065),U=e(54530),Q=e(54977),W=e(73171),X=e(76570),Y=e(1977),w=e(96534),o=e(45779),L=e(6934),$=e(43185),C=e(94412),fe=e(49111),i=e(19650),Ze=e(34792),me=e(48086),ue=e(11849),p=e(952),le=e(37476),v=e(5966),ie=e(82361),he=e(62298),xe=e(68139),t=e(85893),E=JSON.parse(localStorage.getItem("token")||"{}"),Fe=function(j){var m=(0,B.useState)(),K=(0,P.Z)(m,2),z=K[0],V=K[1],N=j.table,O=j.title,u=j.info,l=j.onFinish;return(0,t.jsxs)(le.Z,{title:O,trigger:(0,t.jsx)(y.Z,{type:"primary",children:O}),modalProps:{destroyOnClose:!0},submitter:{searchConfig:{submitText:O,resetText:"\u53D6\u6D88"}},onFinish:function(){var a=(0,G.Z)(x().mark(function n(r){var s,S,h,g;return x().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return S=r.difficulty,h=r.recommend,c.next=3,l((0,ue.Z)((0,ue.Z)({},r),{},{id:u==null?void 0:u.id,difficulty:S*2,recommend:h*2}));case 3:return g=c.sent,g.code===1e3&&me.default.success("\u6DFB\u52A0\u6210\u529F"),c.next=7,(s=N.current)===null||s===void 0?void 0:s.reload();case 7:return c.abrupt("return",!0);case 8:case"end":return c.stop()}},n)}));return function(n){return a.apply(this,arguments)}}(),children:[(0,t.jsx)(D.C,{src:z}),(0,t.jsxs)(p.UW,{children:[(0,t.jsx)(v.Z,{width:"md",name:"title",label:"\u8DEF\u7EBF\u540D\u79F0",rules:[{required:!0,message:"\u8DEF\u7EBF\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A!"}],initialValue:u.title,placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7EBF\u540D\u79F0"}),(0,t.jsx)(v.Z,{width:"md",name:"summary",label:"\u8DEF\u7EBF\u63CF\u8FF0",initialValue:u.summary,rules:[{required:!0,message:"\u8DEF\u7EBF\u63CF\u8FF0\u4E0D\u80FD\u4E3A\u7A7A!"}],placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7EBF\u63CF\u8FF0"})]}),(0,t.jsxs)(p.UW,{children:[(0,t.jsx)(v.Z,{width:"sm",name:"avatar",label:"\u56FE\u6807",initialValue:u.avatar,fieldProps:{onChange:function(n){return V(n.target.value)},value:z},placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7EBF\u56FE\u6807"}),(0,t.jsx)(xe.Z,{rotate:!0,children:(0,t.jsx)(C.Z,{action:"/antq/web/minio/upload",headers:{Authorization:(E==null?void 0:E.token_type)+" "+(E==null?void 0:E.access_token)},showUploadList:!1,onChange:function(n){var r;n.file.status==="done"&&V((r=n.file.response)===null||r===void 0?void 0:r.data)},children:(0,t.jsxs)(i.Z,{direction:"vertical",children:[(0,t.jsx)("div",{children:"upload"}),(0,t.jsx)(y.Z,{icon:(0,t.jsx)(he.Z,{}),type:"primary",children:"\u4E0A\u4F20"})]})})}),(0,t.jsx)(v.Z,{width:"md",name:"iframe",label:"\u5730\u56FE\u9875",initialValue:u.iframe,tooltip:"FatMap\u5206\u4EAB\u7684iframe\u6807\u7B7E",rules:[{required:!0,message:"\u5730\u56FE\u9875\u4E0D\u80FD\u4E3A\u7A7A!",whitespace:!0}],placeholder:"\u8BF7\u8F93\u5165\u5730\u56FE\u9875"})]}),(0,t.jsxs)(p.UW,{children:[(0,t.jsx)(v.Z,{width:"md",name:"distance",label:"\u8DDD\u79BB(\u7C73)",initialValue:u.distance,rules:[{pattern:RegExp("\\dn*"),message:"\u8DDD\u79BB\u53EA\u80FD\u4E3A\u6574\u6570",whitespace:!0}],placeholder:"\u8BF7\u8F93\u5165\u7EBF\u8DEF\u8DDD\u79BB",prefixCls:"m"}),(0,t.jsx)(v.Z,{width:"md",name:"elevation",label:"\u5E73\u5747\u6D77\u62D4(\u7C73)",initialValue:u.elevation,rules:[{pattern:RegExp("\\dn*"),message:"\u6D77\u62D4\u53EA\u80FD\u4E3A\u6574\u6570",whitespace:!0}],placeholder:"\u8BF7\u8F93\u5165\u5E73\u5747\u6D77\u62D4"})]}),(0,t.jsxs)(p.UW,{children:[(0,t.jsx)(v.Z,{width:"md",name:"elevationRise",label:"\u7D2F\u8BA1\u722C\u5347(\u7C73)",initialValue:u.elevationRise,rules:[{pattern:RegExp("\\dn*"),message:"\u7D2F\u8BA1\u722C\u5347\u53EA\u80FD\u4E3A\u6574\u6570",whitespace:!0}],placeholder:"\u8BF7\u8F93\u5165\u7D2F\u8BA1\u722C\u5347",prefixCls:"m"}),(0,t.jsx)(v.Z,{width:"md",name:"elevationFall",label:"\u7D2F\u8BA1\u4E0B\u964D(\u7C73)",initialValue:u.elevationFall,rules:[{pattern:RegExp("\\dn*"),message:"\u7D2F\u8BA1\u4E0B\u964D\u53EA\u80FD\u4E3A\u6574\u6570",whitespace:!0}],placeholder:"\u8BF7\u8F93\u5165\u7D2F\u8BA1\u4E0B\u964D"})]}),(0,t.jsxs)(p.UW,{children:[(0,t.jsx)(ie.Z,{width:330,name:"difficulty",fieldProps:{character:function(n){var r=n.index;return q[r+1]}},label:"\u96BE\u5EA6\u7CFB\u6570",initialValue:Number(u.difficulty)/2}),(0,t.jsx)(ie.Z,{width:330,name:"recommend",fieldProps:{character:function(n){var r=n.index;return _[r+1]}},label:"\u63A8\u8350\u6307\u6570",initialValue:Number(u.recommend)/2})]})]})},se=Fe,Ee=e(51014),k=e(87336),q={1:(0,t.jsx)(f.Z,{}),2:(0,t.jsx)(f.Z,{}),3:(0,t.jsx)(I.Z,{}),4:(0,t.jsx)(d.Z,{}),5:(0,t.jsx)(d.Z,{})},_={1:(0,t.jsx)(d.Z,{}),2:(0,t.jsx)(d.Z,{}),3:(0,t.jsx)(I.Z,{}),4:(0,t.jsx)(f.Z,{}),5:(0,t.jsx)(f.Z,{})},je=function(j){(0,M.Z)(j);var m=(0,B.useRef)(),K=[{dataIndex:"index",valueType:"indexBorder",width:40},{title:"\u56FE\u6807",dataIndex:"avatar",width:50,render:function(a){return(0,t.jsx)(D.C,{src:a})}},{title:"\u540D\u79F0",dataIndex:"title",width:100,render:function(a){return(0,t.jsx)(T.Z,{style:{fontSize:"14px"},color:w.dj,children:a})}},{title:"\u8DDD\u79BB(\u7C73)",dataIndex:"distance",sorter:!0,width:100,render:function(a){return(0,t.jsx)(k.Z,{valueStyle:{fontSize:15,color:"red"},value:Number(a)||"-"})}},{title:(0,t.jsx)(J.Z,{}),dataIndex:"elevationRise",width:60,render:function(a){return(0,t.jsx)(k.Z,{valueStyle:{color:"red"},value:Number(a)||"-"})}},{title:(0,t.jsx)(U.Z,{}),dataIndex:"elevationFall",width:60,render:function(a){return(0,t.jsx)(k.Z,{valueStyle:{color:"green"},value:Number(a)||"-"})}},{title:"\u63CF\u8FF0",dataIndex:"summary"},{title:"\u96BE\u5EA6\u7CFB\u6570",dataIndex:"difficulty",width:200,sorter:!0,render:function(a){return(0,t.jsx)(Z.Z,{character:function(r){var s=r.index;return q[s+1]},allowHalf:!0,disabled:!0,value:Number(a)/2})}},{title:"\u63A8\u8350\u6307\u6570",dataIndex:"recommend",width:200,sorter:!0,render:function(a){return(0,t.jsx)(Z.Z,{character:function(r){var s=r.index;return _[s+1]},allowHalf:!0,disabled:!0,value:Number(a)/2})}},{title:"\u64CD\u4F5C",key:"option",width:200,valueType:"option",render:function(a,n){return[(0,t.jsx)(le.Z,{width:"90%",style:{top:0},trigger:(0,t.jsx)(y.Z,{type:"primary",children:"FatMap"}),submitter:!1,modalProps:{closable:!1,bodyStyle:{height:800,padding:0}},children:(0,t.jsx)("div",{dangerouslySetInnerHTML:{__html:n.iframe||""}})},"detail"),(0,t.jsx)(se,{table:m,title:(0,t.jsx)(Q.Z,{style:{fontSize:16}}),info:n,onFinish:o.A0},"update"),(0,t.jsx)(Ee.Z,{title:"\u786E\u5B9A\u5220\u9664\u8BE5\u8DEF\u7EBF?",table:m,request:function(){return(0,o.u8)(n.id||"")},children:(0,t.jsx)(W.Z,{style:{fontSize:16}})},"del")]}}],z={},V=(0,B.useState)(""),N=(0,P.Z)(V,2),O=N[0],u=N[1];return(0,t.jsx)(re.ZP,{children:(0,t.jsx)(F.ZP,{columns:K,pagination:{size:"default",pageSize:10},actionRef:m,request:function(){var l=(0,G.Z)(x().mark(function a(n,r){var s,S,h,g,H;return x().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(s=n.pageSize,S=n.current,h={pageSize:s,pageNum:S,search:O},r)for(g in r)h.orderBy=g,H=r[g],h.order=H==="descend"?"desc":H==="ascend"?"asc":void 0;return b.abrupt("return",(0,o.qA)(h).then(function(de){var ee,te;return{data:(ee=de.data)===null||ee===void 0?void 0:ee.list,success:!0,total:(te=de.data)===null||te===void 0?void 0:te.total}}));case 4:case"end":return b.stop()}},a)}));return function(a,n){return l.apply(this,arguments)}}(),headerTitle:(0,t.jsx)(L.Z,{allowClear:!0,enterButton:(0,t.jsx)(X.Z,{}),onSearch:function(a){var n;u(a),(n=m.current)===null||n===void 0||n.reload()}}),rowKey:function(a){return a.id||""},toolBarRender:function(){return[(0,t.jsx)(se,{table:m,title:(0,t.jsx)(Y.Z,{style:{fontSize:16}}),info:z,onFinish:o.W1})]},search:!1})})},ge=je}}]);
