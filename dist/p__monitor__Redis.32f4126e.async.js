(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[1743],{20275:function(xt,U,t){"use strict";t.r(U);var F=t(86582),M=t(3182),P=t(13062),E=t(71230),K=t(71153),w=t(60331),C=t(2824),k=t(94043),p=t.n(k),_=t(67294),G=t(45779),O=t(94379),Y=t(96534),g=t(97451),L=t(531),S=t(85893),it=function(){var q=(0,_.useRef)(),ot=(0,_.useState)([]),tt=(0,C.Z)(ot,2),N=tt[0],v=tt[1],H=(0,_.useState)([]),e=(0,C.Z)(H,2),et=e[0],ut=e[1],lt=(0,_.useState)([]),nt=(0,C.Z)(lt,2),at=nt[0],b=nt[1],dt=(0,_.useState)([]),Z=(0,C.Z)(dt,2),W=Z[0],j=Z[1],z=(0,_.useState)([]),rt=(0,C.Z)(z,2),st=rt[0],A=rt[1],a=(0,_.useRef)();(0,_.useEffect)(function(){return a.current=setInterval(function(){var n;return(n=q.current)===null||n===void 0?void 0:n.reload()},5e3),function(){a.current&&clearInterval(a.current)}},[]);var d=[{dataIndex:"index",valueType:"indexBorder",width:40},{title:"\u5C5E\u6027",dataIndex:"prop",render:function(u){return(0,S.jsx)(w.Z,{style:{fontSize:"12px"},color:Y.dj,children:u==null?void 0:u.toString().toUpperCase()})}},{title:"\u5C5E\u6027\u503C",dataIndex:"value"},{title:"\u8BF4\u660E",dataIndex:"desc"}];return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(E.Z,{gutter:10,style:{padding:5},children:[(0,S.jsx)(g.LineCard,{loading:!1,times:N,data:et,title:"\u5185\u5B58\u5360\u7528",subTitle:"(MB)",max:1024}),(0,S.jsx)(g.LineCard,{loading:!1,times:N,data:st,title:"QPS",max:1024}),(0,S.jsx)(g.LineCard,{loading:!1,times:N,data:at,title:"\u7F51\u7EDC\u5165\u53E3KPS",max:1024}),(0,S.jsx)(g.LineCard,{loading:!1,times:N,data:W,title:"\u7F51\u7EDC\u51FA\u53E3KPS",max:1024})]}),(0,S.jsx)(O.ZP,{loading:!1,actionRef:q,columns:d,request:(0,M.Z)(p().mark(function n(){return p().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,G.T8)().then(function(x){var s,I,R,l;return v([].concat((0,F.Z)(N),[(0,L.XV)()])),(s=x.data)===null||s===void 0||s.filter(function(m){return m.prop==="USED_MEMORY"}).forEach(function(m){var J;return ut([].concat((0,F.Z)(et),[Number((J=Number(m.value)/(1024*1024))===null||J===void 0?void 0:J.toFixed(2))]))}),(I=x.data)===null||I===void 0||I.filter(function(m){return m.prop==="INSTANTANEOUS_INPUT_KBPS"}).forEach(function(m){return b([].concat((0,F.Z)(at),[Number(m.value)]))}),(R=x.data)===null||R===void 0||R.filter(function(m){return m.prop==="INSTANTANEOUS_OUTPUT_KBPS"}).forEach(function(m){return j([].concat((0,F.Z)(W),[Number(m.value)]))}),(l=x.data)===null||l===void 0||l.filter(function(m){return m.prop==="INSTANTANEOUS_OPS_PER_SEC"}).forEach(function(m){return A([].concat((0,F.Z)(st),[Number(m.value)]))}),{data:x.data,success:!0}}));case 1:case"end":return f.stop()}},n)})),rowKey:function(u){return u.prop},toolBarRender:!1,pagination:!1,search:!1})]})};U.default=it},97451:function(xt,U,t){"use strict";t.r(U),t.d(U,{LineCard:function(){return j},default:function(){return st}});var F=t(13062),M=t(71230),P=t(32059),E=t(11849),K=t(2824),w=t(89032),C=t(15746),k=t(34669),p=t(32074),_=t(98858),G=t(4914),O=t(67294),Y=t(45779),g=t(68023),L=t(8690),S=t(17813),it=t(31281),jt=t(68712),q=t(54377),ot=t(70012),tt=t(79813),N=t(65034),v=t(96534),H=t(96138),e=t(85893);g.D([L.N,S.N,it.N,jt.N,q.N,ot.N,tt.z]);var et=function(a){var d=a.style,n=a.xData,u=a.yData,f=a.title,x=a.min,s=x===void 0?0:x,I=a.max,R=I===void 0?100:I,l=a.name,m={dataZoom:[{type:"inside",start:0,end:100}],title:[{left:"center",text:f,textStyle:{fontSize:12,color:v.dj}}],visualMap:[{show:!1,type:"continuous",seriesIndex:0,inRange:{color:[H.Dg,v.dj,v.dj,H.Ss]},min:s+(R-s)*.4,max:R*.8}],tooltip:{trigger:"axis"},xAxis:[{data:n,axisTick:{show:!1},axisLabel:{show:!0,color:v.dj},axisLine:{show:!0,lineStyle:{color:v.dj}}}],yAxis:[{splitNumber:3,scale:!0,splitArea:{show:!1},splitLine:{show:!1},axisLabel:{show:!0,color:v.dj}}],grid:[{left:"13%",right:"0%",top:"10%",height:"80%"}],series:[{name:l,type:"line",showSymbol:!1,smooth:!0,data:u}]};return(0,e.jsx)(N.Z,{style:d,option:m})},ut=et,lt=t(84787),nt=t(52778),at=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;return a*100/d},b=10,dt=function(a){var d=a.record,n=[];for(var u in d)n.push((0,e.jsx)(G.Z.Item,{labelStyle:{color:v.dj},contentStyle:{color:v.dj},label:(0,e.jsx)("b",{children:u}),children:d[u]}));return(0,e.jsx)(G.Z,{column:1,size:"small",style:{height:200},children:n})},Z=function(a){var d=a.used,n=d===void 0?0:d,u=a.total,f=u===void 0?100:u,x=a.suffix,s=at(n,f);return(0,e.jsx)(p.Z,{style:{margin:"auto 0"},percent:s,steps:10,format:function(){return(0,e.jsx)("span",{style:{color:v.dj},children:"".concat(n.toFixed(1),"/").concat(f,"(").concat(x,")")})},strokeWidth:14,strokeColor:s<=30?H.Dg:s>=70?H.Ss:v.dj})},W=function(a){var d=a.used,n=d===void 0?0:d,u=a.suffix,f=n<100?n:Number((n+"").substring(0,2));return(0,e.jsx)(p.Z,{style:{margin:"auto 0"},percent:f,steps:10,format:function(){return(0,e.jsx)("span",{style:{color:v.dj},children:"".concat(n.toFixed(1),"(").concat(u,")")})},strokeWidth:14,strokeColor:v.dj})},j=function(a){var d=a.loading,n=a.times,u=a.data,f=a.title,x=a.subTitle,s=a.max;return(0,e.jsx)(C.Z,{xs:12,xl:6,style:{marginBottom:10},children:(0,e.jsx)(nt.Z,{loading:d,hoverable:!0,bordered:!0,title:(0,e.jsx)("b",{style:{color:v.dj},children:f}),subTitle:(0,e.jsx)("span",{style:{color:v.dj},children:x}),gutter:[0,20],style:{height:300},chart:(0,e.jsx)(ut,{style:{height:200},xData:n,yData:u,name:f,max:s})})})},z=function(a){var d=a.loading,n=a.record,u=a.title,f=a.subTitle;return(0,e.jsx)(C.Z,{xs:24,xl:6,style:{marginBottom:10},children:(0,e.jsx)(lt.ZP,{loading:d,hoverable:!0,bordered:!0,title:(0,e.jsx)("b",{style:{color:v.dj},children:u}),subTitle:(0,e.jsx)("span",{style:{color:v.dj},children:f}),gutter:[0,20],style:{height:340},children:(0,e.jsx)(dt,{record:n})})})},rt=function(){var a=(0,O.useState)(),d=(0,K.Z)(a,2),n=d[0],u=d[1],f=(0,O.useState)([]),x=(0,K.Z)(f,1),s=x[0],I=(0,O.useState)(!0),R=(0,K.Z)(I,2),l=R[0],m=R[1],J=(0,O.useState)([]),gt=(0,K.Z)(J,1),y=gt[0],vt=(0,O.useRef)(),Et=function(){return(0,Y.zk)().then(function(r){if(r!=null&&r.data){var o=r.data;s.push(o),y.push(o.now),u(o),l&&m(!1)}})};(0,O.useEffect)(function(){return Et().then(function(){return vt.current=setInterval(function(){return Et()},b*1e3)}),function(){vt.current&&clearInterval(vt.current)}},[]);var B=n||{},yt=B.system,Dt=B.username,D=B.java,X=B.jvmList,h=B.cpu,Q=B.memory,V=B.virtual,T=B.disk,mt=B.partitionList,ft=B.networkIFList,ht=function(){var r={};return mt==null||mt.forEach(function(o){r=(0,E.Z)((0,E.Z)({},r),{},(0,P.Z)({},o.name,(0,e.jsx)(Z,{used:o==null?void 0:o.used,total:o==null?void 0:o.total,suffix:"G"})))}),(0,E.Z)((0,E.Z)({},r),{},{\u8BFB\u53D6\u6570\u636E:(0,e.jsx)(W,{used:((T==null?void 0:T.write)||0)/1024,suffix:"G"}),\u5199\u5165\u6570\u636E:(0,e.jsx)(W,{used:((T==null?void 0:T.read)||0)/1024,suffix:"G"})})},Tt=function(){var r={};return ft==null||ft.filter(function(o){var c;return((c=o.ipv4)===null||c===void 0?void 0:c.length)&&o.recv>0&&o.sent>0}).forEach(function(o){var c,$=o.name,ct=o.recv,St=o.sent,Mt=o.ipv4,Pt=o.mac;r=(0,E.Z)((0,E.Z)({},r),{},(c={},(0,P.Z)(c,$,(0,e.jsx)("b",{style:{color:v.dj},children:Mt})),(0,P.Z)(c,"mac\u5730\u5740",(0,e.jsx)("b",{style:{color:v.dj},children:Pt})),(0,P.Z)(c,$+"\u63A5\u6536",(0,e.jsx)(W,{used:ct/(1024*1024),suffix:"G"})),(0,P.Z)(c,$+"\u53D1\u9001",(0,e.jsx)(W,{used:St/(1024*1024),suffix:"G"})),c))}),r},_t=function(){var r={\u540D\u79F0:D==null?void 0:D.name,\u7248\u672C:D==null?void 0:D.version,\u516C\u53F8:D==null?void 0:D.vendor,\u4FE1\u606F:D==null?void 0:D.info};return X==null||X.forEach(function(o){var c=o.name,$=o.total,ct=o.used;r=(0,E.Z)((0,E.Z)({},r),{},(0,P.Z)({},c,(0,e.jsx)(Z,{used:ct,total:$,suffix:"M"})))}),r};return(0,e.jsxs)(M.Z,{gutter:10,style:{padding:5},children:[(0,e.jsx)(z,{loading:l,title:"\u7CFB\u7EDF\u4FE1\u606F",record:{\u7CFB\u7EDF:yt,\u7528\u6237\u540D:Dt,CPU:h==null?void 0:h.name,\u6838\u5FC3\u6570:h==null?void 0:h.coreNum,\u7CFB\u7EDF\u8D1F\u8F7D:(0,e.jsx)(Z,{used:(h==null?void 0:h.used)+(h==null?void 0:h.sys),suffix:"%"}),\u7269\u7406\u5185\u5B58:(0,e.jsx)(Z,{used:Q==null?void 0:Q.used,total:Q==null?void 0:Q.total,suffix:"M"}),\u865A\u62DF\u5185\u5B58:(0,e.jsx)(Z,{used:V==null?void 0:V.used,total:V==null?void 0:V.total,suffix:"M"}),\u78C1\u76D8\u7A7A\u95F4:(0,e.jsx)(Z,{used:T==null?void 0:T.used,total:T==null?void 0:T.total,suffix:"G"})}}),(0,e.jsx)(z,{title:"JDK\u4FE1\u606F",loading:l,record:_t()}),(0,e.jsx)(z,{title:"\u78C1\u76D8\u5206\u533A",loading:l,record:ht()}),(0,e.jsx)(z,{title:"\u7F51\u5361",loading:l,record:Tt()}),(0,e.jsx)(j,{loading:l,title:"CPU\u4F7F\u7528\u7387(%)",subTitle:"\u7528\u6237",times:y,data:s.map(function(i){return i.cpu.used})}),(0,e.jsx)(j,{loading:l,title:"CPU\u4F7F\u7528\u7387(%)",subTitle:"\u7CFB\u7EDF",times:y,data:s.map(function(i){return i.cpu.sys})}),(0,e.jsx)(j,{loading:l,title:"CPU\u7A7A\u95F2\u7387(%)",times:y,data:s.map(function(i){return i.cpu.free})}),(0,e.jsx)(j,{loading:l,title:"CPU\u7B49\u5F85\u65F6\u95F4(ms)",times:y,data:s.map(function(i){return i.cpu.wait})}),(0,e.jsx)(j,{loading:l,title:"\u7269\u7406\u5185\u5B58",subTitle:(n==null?void 0:n.memory.total)+"M",times:y,data:s.map(function(i){return i.memory.used}),max:n==null?void 0:n.memory.max}),(0,e.jsx)(j,{loading:l,title:"\u865A\u62DF\u5185\u5B58",subTitle:(n==null?void 0:n.virtual.total)+"M",times:y,data:s.map(function(i){return i.virtual.used}),max:n==null?void 0:n.virtual.max}),(0,e.jsx)(j,{loading:l,title:"\u78C1\u76D8\u8BFB\u53D6",subTitle:"KB/S",times:y,data:s.map(function(i,r){return r===0?0:(i.disk.read-s[r-1].disk.read)/b}),max:2e4}),(0,e.jsx)(j,{loading:l,title:"\u78C1\u76D8\u5199\u5165",subTitle:"KB/S",times:y,data:s.map(function(i,r){return r===0?0:(i.disk.write-s[r-1].disk.write)/b}),max:1e4}),X==null?void 0:X.map(function(i){return(0,e.jsx)(j,{loading:l,title:i.name,subTitle:i.total+"M",times:y,data:s.map(function(r){var o,c;return(r==null||(o=r.jvmList)===null||o===void 0||(c=o.find(function($){return $.name===i.name}))===null||c===void 0?void 0:c.used)||0}),max:i.total},i.name)}),(0,e.jsx)(j,{loading:l,title:"\u7F51\u7EDC\u53D1\u9001",subTitle:"KB/S",times:y,data:s.map(function(i,r){return r===0?0:(i.sent-s[r-1].sent)/b}),max:1024}),(0,e.jsx)(j,{loading:l,title:"\u7F51\u7EDC\u63A5\u6536",subTitle:"KB/S",times:y,data:s.map(function(i,r){return r===0?0:(i.recv-s[r-1].recv)/b}),max:1024})]})},st=rt},531:function(xt,U,t){"use strict";t.d(U,{Lg:function(){return C},zO:function(){return k},XV:function(){return p},wx:function(){return _},MX:function(){return G},qf:function(){return O},ay:function(){return Y}});var F=t(30381),M=t.n(F),P="yyyy-MM-DD",E="yyyy-MM-DD HH:mm:ss",K="HH:mm:ss",w="HH:mm",C=function(){return M()().format(P)},k=function(){return M()().format(E)},p=function(){return M()().format(K)},_=function(L){return M()(L).format(P)},G=function(L){return M()(L).format(E)},O=function(L){return M()(L).format(w)},Y="2000-01-01"}}]);
