(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[106],{51014:function(q,B,e){"use strict";var g=e(62350),O=e(75443),V=e(57663),C=e(71577),G=e(71343),M=e(34792),Y=e(48086),F=e(57361),J=e(33565),p=e(67294),E=e(85893),r=function(A){var S=p.useState(!1),P=(0,J.Z)(S,2),v=P[0],x=P[1],b=p.useState(!1),L=(0,J.Z)(b,2),ee=L[0],W=L[1],w=function(){x(!0)},I=function(){var T=(0,F.Z)((0,G.Z)().mark(function Q(){var j,U;return(0,G.Z)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return W(!0),f.prev=1,f.next=4,A.request();case 4:j=f.sent,j.code===1e3?Y.ZP.success("\u5220\u9664\u6210\u529F"):Y.ZP.error(j.msg);case 6:return f.prev=6,x(!1),W(!1),(U=A.table.current)===null||U===void 0||U.reload(),f.finish(6);case 11:case"end":return f.stop()}},Q,null,[[1,,6,11]])}));return function(){return T.apply(this,arguments)}}(),D=function(){x(!1)};return(0,E.jsx)(O.Z,{title:A.title,visible:v,onConfirm:I,okButtonProps:{loading:ee},onCancel:D,children:(0,E.jsx)(C.Z,{type:"primary",danger:!0,onClick:w,children:A.children})})};B.Z=r},72152:function(q,B,e){"use strict";var g=e(64896),O=e(37744),V=e(98858),C=e(4914),G=e(71153),M=e(60331),Y=e(57663),F=e(71577),J=e(67294),p=e(37476),E=e(96534),r=e(85893),H=function(S){var P,v=S.info;return(0,r.jsx)(p.Y,{title:v.title,width:800,trigger:(0,r.jsx)(F.Z,{type:"primary",children:v.title}),submitter:!1,children:(0,r.jsx)(O.Z,{title:(0,r.jsx)("span",{style:{color:E.dj},children:v.name}),className:"site-page-header",subTitle:v.introduction,tags:typeof v.tag=="string"?(0,r.jsx)(M.Z,{color:E.dj,children:v.tag}):v.tag,avatar:{src:v.avatar},children:(0,r.jsx)(C.Z,{size:"middle",column:3,children:(P=v.info)===null||P===void 0?void 0:P.map(function(x){return(0,r.jsx)(C.Z.Item,{label:(0,r.jsx)(M.Z,{color:E.dj,children:x.label}),children:(0,r.jsx)("span",{style:{color:E.dj},children:x.value})},x.value)})})})})};B.Z=H},90055:function(q,B,e){"use strict";e.r(B),e.d(B,{default:function(){return je}});var g=e(71343),O=e(57361),V=e(33565),C=e(37730),G=e(71153),M=e(60331),Y=e(94233),F=e(51890),J=e(47673),p=e(4107),E=e(48846),r=e(67294),H=e(63511),A=e(43185),S=e(94412),P=e(49111),v=e(19650),x=e(34792),b=e(48086),L=e(96132),ee=e(57663),W=e(71577),w=e(37476),I=e(24739),D=e(5966),T=e(64317),Q=e(63434),j=e(45779),U=e(89366),te=e(62298),f=e(7789),t=e(85893),R=JSON.parse(localStorage.getItem("token")||"{}"),le=function(h){var _=(0,r.useState)(),X=(0,V.Z)(_,2),$=X[0],z=X[1],k=h.table,N=h.title,m=h.info,n=m.user,l=m.roleList,i=h.onFinish;return(0,t.jsxs)(w.Y,{title:N,width:800,trigger:(0,t.jsx)(W.Z,{type:"primary",children:N}),modalProps:{destroyOnClose:!0},submitter:{searchConfig:{submitText:N,resetText:"\u53D6\u6D88"}},onFinish:function(){var s=(0,O.Z)((0,g.Z)().mark(function u(a){var y,c;return(0,g.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,i((0,L.Z)((0,L.Z)({},a),{},{id:n==null?void 0:n.id,avatar:$}),a.roles.map(function(Z){return{id:Z}}));case 2:return c=o.sent,c.code===1e3&&b.ZP.success("\u6DFB\u52A0\u6210\u529F"),o.next=6,(y=k.current)===null||y===void 0?void 0:y.reload();case 6:return o.abrupt("return",!0);case 7:case"end":return o.stop()}},u)}));return function(u){return s.apply(this,arguments)}}(),children:[(0,t.jsx)(F.C,{src:$,icon:(0,t.jsx)(U.Z,{})}),(0,t.jsxs)(I.UW,{children:[(0,t.jsx)(D.Z,{width:"md",name:"username",label:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u7528\u6237\u540D\u4E0D\u80FD\u4E3A\u7A7A!"}],initialValue:n.username,disabled:n.id!==void 0,placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"}),(0,t.jsx)(D.Z.Password,{width:"md",name:"password",label:"\u5BC6\u7801",initialValue:n.password,rules:[{required:!0,message:"\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A!"}],hasFeedback:!0,placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"})]}),(0,t.jsxs)(I.UW,{children:[(0,t.jsx)(D.Z,{width:"sm",name:"avatar",label:"\u5934\u50CF",initialValue:n.avatar,fieldProps:{onChange:function(u){return z(u.target.value)},value:$},placeholder:"\u8BF7\u8F93\u5165\u5934\u50CF\u7F51\u5740"}),(0,t.jsx)(f.Z,{rotate:!0,children:(0,t.jsx)(S.Z,{action:"/antq/web/minio/upload",headers:{Authorization:(R==null?void 0:R.token_type)+" "+(R==null?void 0:R.access_token)},showUploadList:!1,onChange:function(u){var a;u.file.status==="done"&&z((a=u.file.response)===null||a===void 0?void 0:a.data)},children:(0,t.jsxs)(v.Z,{direction:"vertical",children:[(0,t.jsx)("div",{children:"upload"}),(0,t.jsx)(W.Z,{icon:(0,t.jsx)(te.Z,{}),type:"primary",children:"\u4E0A\u4F20"})]})})}),(0,t.jsx)(D.Z,{width:"md",name:"nickname",label:"\u6635\u79F0",initialValue:n.nickname,tooltip:"What do you want others to call you?",rules:[{required:!0,message:"\u6635\u79F0\u4E0D\u80FD\u4E3A\u7A7A!",whitespace:!0}],placeholder:"\u8BF7\u8F93\u5165\u6635\u79F0"})]}),(0,t.jsxs)(I.UW,{children:[(0,t.jsx)(T.Z,{mode:"multiple",width:"md",name:"roles",label:"\u89D2\u8272",initialValue:l.map(function(s){return s.id}),request:(0,O.Z)((0,g.Z)().mark(function s(){var u,a;return(0,g.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,j.Oj)();case 2:return a=c.sent,c.abrupt("return",(a==null||(u=a.data)===null||u===void 0?void 0:u.filter(function(d){var o,Z;return(d==null||(o=d.role)===null||o===void 0?void 0:o.id)&&(d==null||(Z=d.role)===null||Z===void 0?void 0:Z.roleName)}).map(function(d){var o,Z;return{label:((o=d.role)===null||o===void 0?void 0:o.roleName)||"",value:((Z=d.role)===null||Z===void 0?void 0:Z.id)||""}}))||[]);case 4:case"end":return c.stop()}},s)})),placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u89D2\u8272!"}]}),(0,t.jsx)(D.Z,{width:"md",name:"phone",initialValue:n.phone,label:"\u624B\u673A\u53F7\u7801",rules:[{required:!0,message:"\u624B\u673A\u53F7\u7801\u4E0D\u80FD\u4E3A\u7A7A!"}],placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\u7801"})]}),(0,t.jsxs)(I.UW,{children:[(0,t.jsx)(D.Z,{width:"md",name:"email",label:"\u90AE\u7BB1",initialValue:n.email,rules:[{type:"email",message:"\u90AE\u7BB1\u4E0D\u5408\u6CD5!"}],placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1"}),(0,t.jsx)(T.Z,{width:"md",name:"gender",label:"\u6027\u522B",initialValue:n.gender+"",valueEnum:{"1":"\u7537","0":"\u5973"},placeholder:"\u8BF7\u9009\u62E9\u6027\u522B",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6027\u522B!"}]})]}),(0,t.jsxs)(Q.Z,{width:"md",name:"agreement",rules:[{validator:function(u,a){return a?Promise.resolve():Promise.reject(new Error("\u8BF7\u5148\u9605\u8BFB\u534F\u8BAE"))}}],valuePropName:"checked",children:["\u6211\u5DF2\u7ECF\u9605\u8BFB\u76F8\u5173 ",(0,t.jsx)("a",{href:"",children:"\u534F\u8BAE"})]})]})},ne=le,se=e(16346),ae=e(32819),re=e(89178),ue=e(18603),oe=e(68628),ie=e(54977),de=e(73171),ve=e(76570),ce=e(31223),me=e(72152),fe=e(51014),K=e(96534),he=p.Z.Search,Ee=function(){var h=(0,r.useRef)(),_=[{dataIndex:"index",valueType:"indexBorder",width:40},{title:(0,t.jsx)(se.Z,{style:{fontSize:"20px"}}),dataIndex:["user","avatar"],render:function(n){return(0,t.jsx)(F.C,{src:n})}},{title:"\u7528\u6237\u540D\u79F0",dataIndex:["user","username"],render:function(n){return(0,t.jsx)(M.Z,{style:{fontSize:"14px"},color:K.dj,icon:(0,t.jsx)(U.Z,{style:{fontSize:16}}),children:n})}},{title:"\u6635\u79F0",dataIndex:["user","nickname"]},{title:"\u624B\u673A\u53F7\u7801",dataIndex:["user","phone"]},{title:"\u90AE\u7BB1",dataIndex:["user","email"]},{title:"\u6027\u522B",dataIndex:["user","gender"],render:function(n){return n===1?(0,t.jsx)(ae.Z,{spin:!0,style:{color:K.dj}}):n===0?(0,t.jsx)(re.Z,{spin:!0,style:{color:"#FA541C"}}):"\u672A\u77E5"}},{title:"\u89D2\u8272",dataIndex:"roleList",render:function(n){return n==null?void 0:n.map(function(l){return(0,t.jsx)(M.Z,{icon:(0,t.jsx)(ue.Z,{}),color:K.dj,children:l.roleName},l.id)})}},{title:"\u64CD\u4F5C",key:"option",width:200,valueType:"option",render:function(n,l){var i=l.user,s=l.roleList,u={title:(0,t.jsx)(oe.Z,{style:{fontSize:16}}),avatar:i.avatar,name:i.username||"",introduction:i.nickname,tag:i.gender===1?(0,t.jsx)(ae.Z,{spin:!0,style:{color:K.dj}}):i.gender===0?(0,t.jsx)(re.Z,{spin:!0,style:{color:K.Dj}}):"\u672A\u77E5",info:[{label:"\u90AE\u7BB1",value:i.email},{label:"\u624B\u673A",value:i.phone}].concat((0,C.Z)(s==null?void 0:s.map(function(a){return{label:"\u89D2\u8272",value:a.roleName}})))};return[(0,t.jsx)(me.Z,{info:u},i.id),(0,t.jsx)(ne,{table:h,title:(0,t.jsx)(ie.Z,{style:{fontSize:16}}),info:l,onFinish:j.Nq},"update"),(0,t.jsx)(fe.Z,{title:"\u786E\u5B9A\u5220\u9664\u7528\u6237?",table:h,request:function(){return(0,j.h8)(i.id||"")},children:(0,t.jsx)(de.Z,{style:{fontSize:16}})},"del")]}}],X={user:{},roleList:[]},$=(0,r.useState)(""),z=(0,V.Z)($,2),k=z[0],N=z[1];return(0,t.jsx)(H.ZP,{children:(0,t.jsx)(E.ZP,{columns:_,pagination:{size:"default",pageSize:10},actionRef:h,request:function(){var m=(0,O.Z)((0,g.Z)().mark(function n(l){var i,s;return(0,g.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i=l.pageSize,s=l.current,a.abrupt("return",(0,j.tM)({pageSize:i,pageNum:s,search:k}).then(function(y){var c,d;return{data:(c=y.data)===null||c===void 0?void 0:c.list,success:!0,total:(d=y.data)===null||d===void 0?void 0:d.total}}));case 2:case"end":return a.stop()}},n)}));return function(n){return m.apply(this,arguments)}}(),headerTitle:(0,t.jsx)(he,{allowClear:!0,enterButton:(0,t.jsx)(ve.Z,{}),onSearch:function(n){var l;N(n),(l=h.current)===null||l===void 0||l.reload()}}),rowKey:function(n){return n.user.id||""},toolBarRender:function(){return[(0,t.jsx)(ne,{table:h,title:(0,t.jsx)(ce.Z,{style:{fontSize:16}}),info:X,onFinish:j.cn})]},search:!1})})},je=Ee}}]);
